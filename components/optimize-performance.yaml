      Name: !Sub 'OptimizePerformance-${AWS::StackName}'
      Description: Optimize HPC application peformance on PCS-compatible AMI
      Version: '0.0.1'
      Platform: Linux
      Data: !Sub |
        name: 'Optimize HPC application performance'
        schemaVersion: 1.0
        phases:
          - name: build
            steps:
              - name: DownloadCommon
                action: WebDownload
                inputs:
                  - source: https://${HpcRecipesS3Bucket}.s3.us-east-1.amazonaws.com/${HpcRecipesBranch}/recipes/pcs/hpc_ready_ami/assets/scripts/common.sh
                    destination: common.sh
              - name: DownloadOptimizeScript
                action: WebDownload
                inputs:
                  - source: https://${HpcRecipesS3Bucket}.s3.us-east-1.amazonaws.com/${HpcRecipesBranch}/recipes/pcs/hpc_ready_ami/assets/scripts/optimize-performance.sh
                    destination: optimize-performance.sh
              - name: ExecuteOptimizeScript
                action: ExecuteBash
                inputs:
                  commands:
                    - set -e
                    - 'chmod +x optimize-performance.sh'
                    - './optimize-performance.sh'
